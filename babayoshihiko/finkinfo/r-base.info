Package: r-base
Version: 2.13.1
Revision: 0.2
Description: Environment for statistical computing
Maintainer:  BABA Yoshihiko <babayoshihiko@mac.com>
Depends: r-framework-2.13
License: GPL

Source: none

CompileScript: <<
  #!/bin/sh -efv
  echo "Nothing to compile"
<<
InstallScript: <<
  #!/bin/sh -ex
  
  FW_VER=`echo %v | sed -e's/[\.][0-9]$//'`
  cd %i
  
  mkdir -p Library/Frameworks/R.framework/Versions
  
  pushd Library/Frameworks/R.framework/Versions
  ln -s %p/Library/Frameworks/R.framework/Versions/$FW_VER Current
  popd
  
  pushd Library/Frameworks/R.framework
  ln -s %p/Library/Frameworks/R.framework/Versions/Current/Headers Headers
  ln -s %p/Library/Frameworks/R.framework/Versions/Current/Resources/lib Libraries
  ln -s %p/Library/Frameworks/R.framework/Versions/Current/PrivateHeaders PrivateHeaders
  ln -s %p/Library/Frameworks/R.framework/Versions/Current/Resources Resources
  popd
  
  mkdir -p lib
  pushd lib
  echo 'rhome=/sw/Library/Frameworks/R.framework/Versions/Current/Resources' >libR.pc
  echo 'rlibdir=${rhome}/lib' >>libR.pc
  echo 'rincludedir=/sw/Library/Frameworks/R.framework/Versions/Current/Resources/include' >>libR.pc
  echo ' ' >>libR.pc
  echo 'Name: libR' >>libR.pc
  echo 'Description: R as a library' >>libR.pc
  echo 'Version: %v' >>libR.pc
  echo 'Libs: -L${rlibdir} -lR' >>libR.pc
  echo 'Cflags: -I${rincludedir} -I${rincludedir}' >>libR.pc
  echo 'Libs.private:' >>libR.pc
  popd

  mkdir -p bin
  pushd bin
  ln -s %p/Library/Frameworks/R.framework/Versions/$FW_VER/Resources/bin/R R
  popd

  mkdir -p share/man/man1
  pushd share/man/man1  
  ln -s /sw/Library/Frameworks/R.framework/Versions/Current/Resources/man1/R.1 R.1
  popd
<<
RuntimeVars: <<
  R_HOME: %p/Library/Frameworks/R.framework/Resources
<<
