Info2: <<
Package: libxt%type_pkg[-flat]-shlibs
Version: 1.1.5
Revision: 1
Type: -flat (boolean)
Source: https://www.x.org/releases/individual/lib/libXt-%v.tar.gz
Source-MD5: 77d317fbc508dd6adefb59d57a663032
Depends: x11-shlibs
BuildDepends: <<
	fink (>= 0.27.2),
	fink-package-precedence,
	x11-dev
<<
PatchScript: <<
#!/bin/sh -ev
	# Don't pass -flat_namespace to compiler (harmless due to -Wl,
	# but noisy)...
	perl -pi -e 's|OS_CFLAGS=\"-Wl\,-flat_namespace\"|OS_CFLAGS=|g' configure

	# ...pass it solely where needed (linker) if we want it
	if [ "%type_raw[-flat]" = "-flat" ]; then
		perl -pi -e 's|(-version-number)|-flat_namespace \1|' src/Makefile.in
	fi

	# don't propagate install_name games into libdir search path
	perl -pi -e 's|\(libdir\)|(prefix)/lib|g if /XFILESEARCHPATHDEFAULT/' configure
<<
ConfigureParams: <<
	--with-appdefaultdir=%p/etc/app-defaults \
	(%type_pkg[-flat]) --libdir=%p/lib/libXt-flat \
	--disable-static \
	--without-xmlto \
	--disable-silent-rules
<<
NoSetCPPFLAGS: true
NoSetLDFLAGS: true
CompileScript: <<
	%{default_script}
	# fink-package-precedence --prohibit-bdep=libxt,libxt-flat .
<<
InstallScript: <<
#!/bin/sh -ev
	make install DESTDIR=%d docdir=%p/share/doc/libxt%type_pkg[-flat] pkgconfigdir=%p/lib/pkgconfig
	if [ "%type_raw[-flat]" = "-flat" ]; then
		ln -s libXt-flat/libXt.dylib %i/lib/libXt.dylib
		ln -s libXt-flat/libXt.la %i/lib/libXt.la
	fi
<<
Shlibs: <<
	(%type_raw[-flat] != -flat) %p/lib/libXt.6.dylib 7.0.0 %n (>= 1.1.5-1)
	(%type_raw[-flat] = -flat)  %p/lib/libXt-flat/libXt.6.dylib 7.0.0 %n (>= 1.1.5-1)
<<
SplitOff: <<
	Package: libxt%type_pkg[-flat]
	Depends: %N (= %v-%r)
	Conflicts: libxt, libxt-flat
	Replaces: libxt, libxt-flat
	BuildDependsOnly: true
	Files: <<
		include
		lib/libXt.{dylib,la}
		(%type_pkg[-flat]) lib/libXt-flat/libXt.{dylib,la}
		lib/pkgconfig
		share/man
	<<
	DocFiles: COPYING ChangeLog README
<<

DocFiles: COPYING ChangeLog README
Description: X toolkit library
License: BSD
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage: https://www.x.org/wiki/
<<
