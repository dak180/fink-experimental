Package: qhull6
Version: 2011.1
Revision: 1
Description: Calculate convex hulls and related structures
License: BSD
Maintainer: Stefan Langerman <fink@slef.org>
DescDetail: <<
Qhull computes convex hulls, Delaunay triangulations, halfspace 
intersections about a point, Voronoi diagrams, furthest-site 
Delaunay triangulations, and furthest-site Voronoi diagrams. 
It runs in 2-d, 3-d, 4-d, and higher dimensions. It implements 
the Quickhull algorithm for computing the convex hull. Qhull 
handles roundoff errors from floating point arithmetic. It 
computes volumes, surface areas, and approximations to the 
convex hull.
<<
DescUsage: <<
This package contains the executables, manpages, and other documentation.
<<
DescPort: <<
	Upstream doesn't appear to grok OS X, so we handcraft the dylib's 
	install_name.
<<
DescPackaging: <<
	For some reason I was getting a lib%N6.dylib -> lib%N6.2.0.dylib hardlink
	instead of symlink, so clean that up manually.
	Put in %p/include/%n -> %p/include/lib%n compatibility symlink for packages
	which were using the previous static-only version of the package.
<<

Source: http://www.qhull.org/download/qhull-%v-src.tgz
Source-MD5: a65061cf2a6e6581182f4df0f3667a8e
SourceDirectory: qhull-%v

BuildDepends: fink (>= 0.24.12-1)
Depends: %N-shlibs (= %v-%r )
Conflicts: qhull
Replaces: qhull

PatchFile: %n.patch
PatchFile-MD5: abf949ee16a68f9720198798b07725b0
PatchScript:  <<
sed -e 's,@INSTPREFIX@,%i,' -e 's,@FINKPREFIX@,%p,' %{PatchFile} | patch -p1
sed -ie 's|-Wno-sign-conversion||' Makefile
<<

GCC: 4.0
CompileScript: make

InfoTest: <<
	TestScript: make test || exit 2
<<

InstallScript: <<
#!/bin/sh -ev
make -j1 install
pushd %i/lib
rm %i/lib/lib%N.dylib
ln -s lib%N.2.0.dylib lib%N.dylib
popd
cd %i/include
<<

DocFiles: Announce.txt COPYING.txt README.txt REGISTER.txt index.htm
Homepage: http://www.qhull.org/
SplitOff:  <<
	Package: %N-shlibs
	Files: lib/lib%N.2.0.dylib
	Shlibs: %p/lib/libqhull6.2.0.dylib 0.0.0 %n (>= 2011.1-1)
	DocFiles: Announce.txt COPYING.txt README.txt REGISTER.txt
	DescUsage: <<
	This package contains the shared library.
	<<
<<
SplitOff2:  <<
	Package: %N-dev
	BuildDependsOnly: true
	Depends: %N-shlibs (= %v-%r)
	Conflicts: qhull
	Replaces: qhull
	Files: <<
	include
	lib
	<<
	DocFiles: Announce.txt COPYING.txt README.txt REGISTER.txt
	DescUsage:  <<
	This package contains the header files, static libraries, and the 
	unversioned dylib.
	<<
<<