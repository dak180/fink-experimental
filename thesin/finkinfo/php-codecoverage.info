Package: php-codecoverage
Version: 1.1.2+dfsg1
Revision: 3.1
###
BuildDepends: <<
	debhelper (>= 8),
	pkg-php-tools,
	pear-phpunit-channel
<<
Depends: <<
	pear-phpunit-channel,
	php-text-template,
	php-file-iterator,
	php-token-stream,
	libjs-jquery,
	libjs-yui,
	php5-xdebug
<<
###
Source: mirror:debian:pool/main/p/%n/%n_%v.orig.tar.gz
Source-MD5: 2df7638eccc81b3f5fe01f4f39df73bb
NoSourceDirectory: true
Source2: mirror:debian:pool/main/p/%n/%n_%v-3.debian.tar.gz
Source2-MD5: d4b86f4be8e7c9a23c7f1ff2c0c076f9
###
PatchScript: <<
#!/bin/sh -ev
BASE=$(echo %p | perl -pi -e 's,/,,'); \
for i in `find debian -type f`; do perl -pi -e "s,usr,${BASE},g" $i; done; \
for i in `find debian -type f`; do perl -pi -e "s,etc,${BASE}\/etc,g" $i; done; \
for i in `find debian -type f`; do perl -pi -e "s,var\/lib,${BASE}\/var\/lib,g" $i; done

### Leave these things to fink
perl -pi -e 's,dh_gencontrol,#dh_gencontrol,g' debian/rules
perl -pi -e 's,dh_md5sums,#dh_md5sum,g' debian/rules
perl -pi -e 's,dh_builddeb,#dh_builddeb,g' debian/rules

cat << EOF >> debian/rules 

override_dh_auto_test:
EOF

patch -p1 < debian/patches/0010-Removes-LICENSE-file-from-binary-package.patch
patch -p1 < debian/patches/0020-Removes-non-free-files-from-package.xml.patch
patch -p1 < debian/patches/0030-remove_highcharts.diff
<<
CompileScript: <<
debian/rules build
<<
InfoTest: <<
	TestScript: <<
dh_auto_test || exit 2
	<<
<<
InstallScript: <<
debian/rules install
dh_installdeb -O--buildsystem=phppear

cp -R debian/%n%p/* %i/
<<
###
Description: PHP code coverage information
DescDetail: <<
This PEAR package provides collection, processing, and rendering functionality
for PHP code coverage information. It is part of a collection of PEAR packages
from phpunit.

PHPUnit is a unit testing suite for the PHP language, modelled on the xUnit
testing framework, designed by Kent Beck and Erich Gamma.
<<
###
License: GPL
Maintainer: Justin F. Halett <thesin@lists.sourceforge.net>
Homepage: http://www.phpunit.de/
