Package: realpath
Version: 1.19
Revision: 1
###
BuildDepends: <<
	debhelper,
	po4a
<<
###
Source: mirror:debian:pool/main/r/%n/%n_%v.tar.gz
Source-MD5: 0c7207efe854b0347f49fad3d709cc3b
SourceDirectory: %n-%v
###
PatchScript: <<
#!/bin/sh -ev
BASE=$(echo %p | perl -pi -e 's,/,,'); \
for i in `find debian -type f`; do perl -pi -e "s,usr,${BASE},g" $i; done; \
for i in `find debian -type f`; do perl -pi -e "s,etc,${BASE}\/etc,g" $i; done; \
for i in `find debian -type f`; do perl -pi -e "s,var\/lib,${BASE}\/var\/lib,g" $i; done

### Leave these things to fink
perl -pi -e 's,dh_gencontrol,#dh_gencontrol,g' debian/rules
perl -pi -e 's,dh_md5sums,#dh_md5sum,g' debian/rules
perl -pi -e 's,dh_builddeb,#dh_builddeb,g' debian/rules

cat << EOF >> debian/rules 

override_dh_auto_test:
EOF

perl -pi -e "s,\/usr,\%p,g" common.mk
perl -pi -e "s,\/etc,\%p\/etc,g" common.mk
perl -pi -e "s,\/var,\%p\/var,g" common.mk
perl -pi -e "s,\%p\/bin\/perl,\/usr\/bin\/perl,g" common.mk

### fink doesn't set thigns to root during install
perl -pi -e 's,-o root -g root,,g' common.mk

### no LFS_CFLAGS on darwin
perl -pi -e 's,-g \$\(shell getconf LFS_CFLAGS\),,g' common.mk
<<
SetLDFLAGS: -lintl
CompileScript: <<
debian/rules build
<<
InfoTest: <<
	TestScript: <<
dh_auto_test || exit 2
	<<
<<
InstallScript: <<
debian/rules install
dh_installdeb

cp -R debian/%n%p/* %i/
<<
###
Description: Return the canonicalized absolute pathname
DescDetail: <<
The package contains a small utility realpath, which converts each
pathname argument to an absolute pathname, which has no components
that are symbolic links or the special .  or ..  directory entries.
.
This utility provides mostly the same functionality as `%p/bin/greadlink -f'
in the coreutils package.
<<
###
License: GPL
Maintainer: Justin F. Halett <thesin@lists.sourceforge.net>
Homepage: http://packages.debian.org/unstable/realpath
