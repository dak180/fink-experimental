Package: texlive-texmf
Version: 0.20100722
Revision: 0
BuildDepends: xz
Conflicts:tetex-texmf
Replaces: tetex-texmf
Provides: tetex-texmf, breqn, chess-tex, cm-super, ctan-other-misc, ctan-supported-misc, enumitem, feynmf, ha-prosper, ifmslide, latex-beamer, latex-figbib, movie15, pdfscreen, pdfslide, pdfsync, pgf, powerdot, ppower4, prosper, srcltx, texpower, tipa, unicode-tex, xcolor, xkeyval
Source: http://www.sr3.t.u-tokyo.ac.jp/~okayama/src/texlive-%v-texmf-delpdf.tar.xz
Source-MD5: 36fc29ad9f7ec3e61b848f55da96bbcd
NoSourceDirectory: true
PatchScript: <<
#!/bin/bash -ev
 xz -dc texlive-%v-texmf-delpdf.tar.xz | tar xf -
 cd     texlive-%v-texmf-delpdf

# Moving README into current dir ...
 mv texmf-dist/README ../README.texmf-dist
 mv texmf/README      ../README.texmf

# Moving files from texmf to texmf-dist ...
 cp -R texmf/* texmf-dist

# Removing files that will be provided the tex4ht package ...
# rm -fR texmf-dist/tex4ht
# rm -fR texmf-dist/tex/generic/tex4ht
# rm -fR texmf-dist/doc/generic/tex4ht
# rm -fR texmf-dist/scripts/tex4ht

# Removing files that will be provided the texlive-base (20080816) package ...
 rm -fR texmf-dist/doc/man
 rm -f  texmf-dist/scripts/context/ruby/texmfstart.rb
 rm -fR texmf-dist/scripts/context/stubs/unix
 rm -fR texmf-dist/scripts/bengali
 rm -fR texmf-dist/scripts/dviasm
 rm -f  texmf-dist/scripts/epspdf/epspdf
 rm -f  texmf-dist/scripts/epspdf/epspdftk
 rm -f  texmf-dist/scripts/glossaries/makeglossaries
 rm -fR texmf-dist/scripts/mkjobtexmf
 rm -fR texmf-dist/scripts/oberdiek
 rm -fR texmf-dist/scripts/perltex
 rm -fR texmf-dist/scripts/pdfcrop
 rm -f  texmf-dist/scripts/ppower4/*.texlua
 rm -f  texmf-dist/scripts/pst-pdf/ps4pdf
 rm -fR texmf-dist/scripts/pst2pdf
 rm -fR texmf-dist/scripts/texcount
 rm -fR texmf-dist/scripts/thumbpdf
 rm -fR texmf-dist/scripts/vpe

# Removing files that will be provided the xetex package ...
# rm -fR texmf-dist/doc/xelatex
# rm -fR texmf-dist/doc/xetex
# rm -fR texmf-dist/fonts/misc/xetex
# rm -fR texmf-dist/scripts/xetex
# rm -fR texmf-dist/source/xelatex
# rm -f  texmf-dist/tex/latex/latexconfig/xelatex.ini
# rm -f  texmf-dist/tex/plain/config/xetex.ini
# rm -fR texmf-dist/tex/xelatex
# rm -fR texmf-dist/tex/xetex

# Removing files that will be provided the jadetex package ...
# rm -fR texmf-dist/doc/jadetex
# rm -fR texmf-dist/source/jadetex
# rm -fR texmf-dist/tex/jadetex

# Removing a compiled *.el file ...
 rm -f  texmf-dist/source/latex/rcs/src/style/rcs.elc
<<
CompileScript: echo "Nothing to do ..."
InstallScript: <<
#!/bin/bash -ev
 cd texlive-%v-texmf-delpdf
 mkdir -p      %i/share
 mv texmf-dist %i/share
<<
DocFiles: README.texmf-dist README.texmf
PostInstScript: <<
if [ -x %p/bin/mktexlsr ]
then
	%p/bin/mktexlsr %p/share/texmf-dist
else
 # overwrite ls-R
 echo "%% ls-R -- filename database for kpathsea; do not change this line." > %p/share/texmf-dist/ls-R
 echo "./:" >> %p/share/texmf-dist/ls-R
 ( cd %p/share/texmf-dist ; /bin/ls -1R ) >> %p/share/texmf-dist/ls-R
fi

 echo "Adjusting permissions ..."
 chmod -R a+rX %p/share/texmf-dist
<<
DescPackaging: <<
We split the original texlive-20100722-texmf.tar.xz into two tarballs:
texlive-0.20100722-texmf-delpdf.tar.xz and texlive-0.20100722-texmf-doc.tar.xz,
which were made by the following script:

###############
#!/bin/bash -ev

 wget ftp://tug.org/texlive/historic/2010/texlive-20100722-texmf.tar.xz
 xz -dc texlive-20100722-texmf.tar.xz | tar xf -

 for file in `find texlive-20100722-texmf/texmf-dist/doc -type f -name '*.pdf'`
 do
     mkdir -p tmp/${file%/*}
     mv $file tmp/$file
 done

 for file in `find texlive-20100722-texmf/texmf/doc -type f -name '*.pdf'`
 do
     mkdir -p tmp/${file%/*}
     mv $file tmp/$file
 done

 mkdir                                      texlive-0.20100722-texmf-doc
 mv  tmp/texlive-20100722-texmf/texmf-dist  texlive-0.20100722-texmf-doc/
 mv  tmp/texlive-20100722-texmf/texmf       texlive-0.20100722-texmf-doc/
 tar cf texlive-0.20100722-texmf-doc.tar    texlive-0.20100722-texmf-doc
 xz  -9 texlive-0.20100722-texmf-doc.tar

 mv     texlive-20100722-texmf              texlive-0.20100722-texmf-delpdf
 tar cf texlive-0.20100722-texmf-delpdf.tar texlive-0.20100722-texmf-delpdf
 xz  -9 texlive-0.20100722-texmf-delpdf.tar
###############

Some duplicate files (there already exists a fink package) are removed
in PatchScript, if they may cause a trouble or their size is large.
<<
License: Restrictive/Distributable
Description: Main texmf tree for a TeX Live installation
Maintainer: Todai Fink Team <fink@sodan.ecc.u-tokyo.ac.jp>
Homepage: http://www.tug.org/texlive/
