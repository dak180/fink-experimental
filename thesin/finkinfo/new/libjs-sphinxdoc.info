Package: libjs-sphinxdoc
Version: 1.3.1
Revision: 1
###
BuildDepends: <<
	python27,
	six-py27,
	jinja2-py27,
	pygments-py27,
	docutils-py27,
	babel-py27,
	alabaster-py27,
	sphinx-rtd-theme-py27
<<
Depends: <<
	libjs-jquery (>= 1.4),
	libjs-underscore
<<
###
Source: http://pypi.python.org/packages/source/S/Sphinx/Sphinx-%v.tar.gz
Source-MD5: 8786a194acf9673464c5455b11fd4332
###
CompileScript: <<
#!/bin/sh -ex
mkdir tmp
%p/bin/python2.7 ./sphinx-build.py -T doc tmp
mkdir tmp2
touch tmp2/empty.rst
cat << EOF >> tmp2/conf.py
master_doc = 'empty'
html_theme = 'classic'
html_theme_options = {'collapsiblesidebar': True}
EOF
%p/bin/python2.7 ./sphinx-build.py -T tmp2 tmp
<<
InstallScript: <<
#!/bin/sh -ex
install -d -m0755 %i/share/javascript/sphinxdoc/1.0/

touch %i/share/javascript/sphinxdoc/index
cat << EOF >> %i/share/javascript/sphinxdoc/index
# <filename> [min-version]
1.0/doctools.js
1.0/jquery.js
1.0/searchtools.js
1.0/sidebar.js
1.0/theme_extras.js
1.0/underscore.js
1.0/css3-mediaqueries.js 1.3
EOF

install -m644 sphinx/themes/basic/static/doctools.js %i/share/javascript/sphinxdoc/1.0/
install -m644 sphinx/themes/bizstyle/static/css3-mediaqueries.js %i/share/javascript/sphinxdoc/1.0/
install -m644 sphinx/themes/scrolls/static/theme_extras.js %i/share/javascript/sphinxdoc/1.0/
install -m644 tmp/_static/sidebar.js %i/share/javascript/sphinxdoc/1.0/
install -m644 tmp/_static/searchtools.js %i/share/javascript/sphinxdoc/1.0/

ln -s %p/share/javascript/jquery/jquery.js %i/share/javascript/sphinxdoc/1.0/jquery.js 
ln -s %p/share/javascript/underscore/underscore.js %i/share/javascript/sphinxdoc/1.0/underscore.js 
<<
###
Description: JavaScript support for Sphinx documentation
DescDetail: <<
Sphinx is a tool for producing documentation for Python projects, using
reStructuredText as markup language.
.
This package provides JavaScript code for documentation generated by Sphinx.
<<
###
License: GPL
Maintainer: Justin F. Halett <thesin@lists.sourceforge.net>
Homepage: http://sphinx-doc.org/
