diff -Nurd -x'*~' glib-2.32.3.orig/configure glib-2.32.3/configure
--- glib-2.32.3.orig/configure	2012-05-14 18:09:26.000000000 -0400
+++ glib-2.32.3/configure	2012-06-05 11:38:26.000000000 -0400
@@ -26458,6 +26458,9 @@
 			G_THREAD_CFLAGS="-D_THREAD_SAFE"
 		fi
 		;;
+	*-darwin*)
+		# Nothing needed.
+		;;
 	*-dg-dgux*)  # DG/UX
 		G_THREAD_CFLAGS="-D_REENTRANT -D_POSIX4A_DRAFT10_SOURCE"
 		;;
diff -Nurd -x'*~' glib-2.32.3.orig/configure.ac glib-2.32.3/configure.ac
--- glib-2.32.3.orig/configure.ac	2012-05-14 18:05:58.000000000 -0400
+++ glib-2.32.3/configure.ac	2012-06-05 18:19:12.000000000 -0400
@@ -219,12 +219,12 @@
 
 if test "x$glib_have_carbon" = "xyes"; then
   AC_DEFINE(HAVE_CARBON, 1, [define to 1 if Carbon is available])
-  LDFLAGS="$LDFLAGS -framework Carbon"
+  LDFLAGS="$LDFLAGS -Wl,-framework,Carbon"
 fi
 
 if test "x$glib_have_cocoa" = "xyes"; then
   AC_DEFINE(HAVE_COCOA, 1, [define to 1 if Cocoa is available])
-  LDFLAGS="$LDFLAGS -framework Foundation"
+  LDFLAGS="$LDFLAGS -Wl,-framework,Foundation"
 fi
 
 gl_GLIBC21
@@ -1816,14 +1816,14 @@
 dnl *** check for libelf ***
 dnl ************************
 
-PKG_CHECK_MODULES([LIBELF], [libelf], [have_libelf=yes], [have_libelf=maybe])
+PKG_CHECK_MODULES([LIBELF], [libelf >= 0.8.12], [have_libelf=yes], [have_libelf=maybe])
 
 if test $have_libelf = maybe; then
   glib_save_LIBS=$LIBS
-  AC_CHECK_LIB([elf], [elf_begin], , [have_libelf=no])
-  AC_CHECK_LIB([elf], [elf_getshdrstrndx], , [have_libelf=no])
-  AC_CHECK_LIB([elf], [elf_getshdrnum], , [have_libelf=no])
-  AC_CHECK_HEADER([libelf.h], , [have_libelf=no])
+  AC_CHECK_LIB([elf], [elf_begin], [:], [have_libelf=no])
+  AC_CHECK_LIB([elf], [elf_getshdrstrndx], [:], [have_libelf=no])
+  AC_CHECK_LIB([elf], [elf_getshdrnum], [:], [have_libelf=no])
+  AC_CHECK_HEADER([libelf.h], [:], [have_libelf=no])
   LIBS=$glib_save_LIBS
 
   if test $have_libelf != no; then
@@ -2040,6 +2040,9 @@
 			G_THREAD_CFLAGS="-D_THREAD_SAFE"
 		fi
 		;;
+	*-darwin*)
+		# Nothing needed.
+		;;
 	*-dg-dgux*)  # DG/UX
 		G_THREAD_CFLAGS="-D_REENTRANT -D_POSIX4A_DRAFT10_SOURCE"
 		;;
diff -Nurd -x'*~' glib-2.32.3.orig/gio/Makefile.am glib-2.32.3/gio/Makefile.am
--- glib-2.32.3.orig/gio/Makefile.am	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/gio/Makefile.am	2012-06-05 14:06:21.000000000 -0400
@@ -510,7 +510,7 @@
 if OS_COCOA
 # This is dumb.  The ObjC source file should be properly named .m
 libgio_2_0_la_CFLAGS = -xobjective-c
-libgio_2_0_la_LDFLAGS += -framework Foundation
+libgio_2_0_la_LDFLAGS += -Wl,-framework,Foundation
 endif
 
 libgio_2_0_la_DEPENDENCIES = $(gio_win32_res) $(gio_def) $(platform_deps)
diff -Nurd -x'*~' glib-2.32.3.orig/gio/gdbusaddress.c glib-2.32.3/gio/gdbusaddress.c
--- glib-2.32.3.orig/gio/gdbusaddress.c	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/gio/gdbusaddress.c	2012-06-05 11:38:38.000000000 -0400
@@ -1523,7 +1523,7 @@
       ret = g_strdup (g_getenv ("DBUS_SYSTEM_BUS_ADDRESS"));
       if (ret == NULL)
         {
-          ret = g_strdup ("unix:path=/var/run/dbus/system_bus_socket");
+          ret = g_strdup ("unix:path=@PREFIX@/var/run/dbus/system_bus_socket");
         }
       break;
 
diff -Nurd -x'*~' glib-2.32.3.orig/gio/gdbusprivate.c glib-2.32.3/gio/gdbusprivate.c
--- glib-2.32.3.orig/gio/gdbusprivate.c	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/gio/gdbusprivate.c	2012-06-05 11:39:14.000000000 -0400
@@ -2094,7 +2094,7 @@
   /* TODO: use PACKAGE_LOCALSTATEDIR ? */
   ret = NULL;
   first_error = NULL;
-  if (!g_file_get_contents ("/var/lib/dbus/machine-id",
+  if (!g_file_get_contents ("@PREFIX@/var/lib/dbus/machine-id",
                             &ret,
                             NULL,
                             &first_error) &&
@@ -2104,7 +2104,7 @@
                             NULL))
     {
       g_propagate_prefixed_error (error, first_error,
-                                  _("Unable to load /var/lib/dbus/machine-id or /etc/machine-id: "));
+                                  _("Unable to load @PREFIX@/var/lib/dbus/machine-id or /etc/machine-id: "));
     }
   else
     {
diff -Nurd -x'*~' glib-2.32.3.orig/gio/gdesktopappinfo.c glib-2.32.3/gio/gdesktopappinfo.c
--- glib-2.32.3.orig/gio/gdesktopappinfo.c	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/gio/gdesktopappinfo.c	2012-06-05 11:39:14.000000000 -0400
@@ -1929,7 +1929,7 @@
       g_file_set_contents (filename, contents, -1, NULL);
       g_free (contents);
 
-      run_update_command ("update-mime-database", "mime");
+      run_update_command ("@PREFIX@/bin/update-mime-database", "mime");
     }
   g_free (filename);
   
@@ -2075,7 +2075,7 @@
   info->filename = filename;
   info->desktop_id = desktop_id;
   
-  run_update_command ("update-desktop-database", "applications");
+  run_update_command ("@PREFIX@/bin/update-desktop-database", "applications");
   
   return TRUE;
 }
diff -Nurd -x'*~' glib-2.32.3.orig/gio/gunixmounts.c glib-2.32.3/gio/gunixmounts.c
--- glib-2.32.3.orig/gio/gunixmounts.c	2012-03-17 22:35:25.000000000 -0400
+++ glib-2.32.3/gio/gunixmounts.c	2012-06-05 11:39:27.000000000 -0400
@@ -271,6 +271,7 @@
     "/sbin",
     "/net",
     "/sys",
+    "@PREFIX@",
     NULL
   };
 
diff -Nurd -x'*~' glib-2.32.3.orig/gio/tests/Makefile.am glib-2.32.3/gio/tests/Makefile.am
--- glib-2.32.3.orig/gio/tests/Makefile.am	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/gio/tests/Makefile.am	2012-06-05 13:21:27.000000000 -0400
@@ -40,7 +40,6 @@
 	buffered-output-stream	\
 	sleepy-stream		\
 	filter-streams		\
-	volumemonitor		\
 	simple-async-result	\
 	srvtarget		\
 	contexts		\
diff -Nurd -x'*~' glib-2.32.3.orig/gio/tests/Makefile.in glib-2.32.3/gio/tests/Makefile.in
--- glib-2.32.3.orig/gio/tests/Makefile.in	2012-05-14 18:09:30.000000000 -0400
+++ glib-2.32.3/gio/tests/Makefile.in	2012-06-05 11:39:27.000000000 -0400
@@ -961,7 +961,7 @@
 	readwrite g-file g-file-info converter-stream \
 	data-input-stream data-output-stream g-icon \
 	buffered-input-stream buffered-output-stream sleepy-stream \
-	filter-streams volumemonitor simple-async-result srvtarget \
+	filter-streams               simple-async-result srvtarget \
 	contexts gsettings gschema-compile async-close-output-stream \
 	gdbus-addresses network-address gdbus-message socket pollable \
 	tls-certificate tls-interaction cancellable vfs \
diff -Nurd -x'*~' glib-2.32.3.orig/gio/tests/pollable.c glib-2.32.3/gio/tests/pollable.c
--- glib-2.32.3.orig/gio/tests/pollable.c	2012-03-11 20:42:41.000000000 -0400
+++ glib-2.32.3/gio/tests/pollable.c	2012-06-06 11:07:36.000000000 -0400
@@ -136,6 +136,13 @@
 static void
 test_pollable_unix (void)
 {
+  char *env_flag = NULL;
+  env_flag = getenv("DISABLE_pollable_unix_TEST");
+  if (env_flag) {
+    g_print("skipping per request ");
+    return;
+  }
+
   int pipefds[2], status;
 
   status = pipe (pipefds);
diff -Nurd -x'*~' glib-2.32.3.orig/gio/xdgmime/xdgmime.c glib-2.32.3/gio/xdgmime/xdgmime.c
--- glib-2.32.3.orig/gio/xdgmime/xdgmime.c	2011-08-15 20:51:30.000000000 -0400
+++ glib-2.32.3/gio/xdgmime/xdgmime.c	2012-06-05 11:39:38.000000000 -0400
@@ -257,7 +257,7 @@
 
   xdg_data_dirs = getenv ("XDG_DATA_DIRS");
   if (xdg_data_dirs == NULL)
-    xdg_data_dirs = "/usr/local/share/:/usr/share/";
+    xdg_data_dirs = "@PREFIX@/share:/usr/local/share/:/usr/share/";
 
   ptr = xdg_data_dirs;
 
diff -Nurd -x'*~' glib-2.32.3.orig/glib/gslice.c glib-2.32.3/glib/gslice.c
--- glib-2.32.3.orig/glib/gslice.c	2012-03-11 20:42:42.000000000 -0400
+++ glib-2.32.3/glib/gslice.c	2012-06-05 11:39:57.000000000 -0400
@@ -1376,19 +1376,18 @@
                     gsize memsize)
 {
   gpointer aligned_memory = NULL;
-  gint err = ENOMEM;
 #if     HAVE_COMPLIANT_POSIX_MEMALIGN
+  gint err;
   err = posix_memalign (&aligned_memory, alignment, memsize);
+  if (!aligned_memory)
+    errno = err;
 #elif   HAVE_MEMALIGN
-  errno = 0;
   aligned_memory = memalign (alignment, memsize);
-  err = errno;
 #elif   HAVE_VALLOC
-  errno = 0;
   aligned_memory = valloc (memsize);
-  err = errno;
 #else
   /* simplistic non-freeing page allocator */
+  gint err = ENOMEM;
   mem_assert (alignment == sys_page_size);
   mem_assert (memsize <= sys_page_size);
   if (!compat_valloc_trash)
@@ -1407,9 +1406,9 @@
         }
     }
   aligned_memory = g_trash_stack_pop (&compat_valloc_trash);
-#endif
   if (!aligned_memory)
     errno = err;
+#endif
   return aligned_memory;
 }
 
diff -Nurd -x'*~' glib-2.32.3.orig/glib/gtimezone.c glib-2.32.3/glib/gtimezone.c
--- glib-2.32.3.orig/glib/gtimezone.c	2012-03-11 20:42:42.000000000 -0400
+++ glib-2.32.3/glib/gtimezone.c	2012-06-05 19:55:01.000000000 -0400
@@ -169,7 +169,12 @@
         }
 
       if (tz->zoneinfo)
-        g_bytes_unref (tz->zoneinfo);
+        {
+          if (tz->header && tz->header->tzh_version != '2')
+            g_free ((gint64_be *)tz->trans);
+
+          g_bytes_unref (tz->zoneinfo);
+        }
 
       g_free (tz->name);
 
@@ -408,13 +413,13 @@
           gsize size;
           const struct tzhead *header = g_bytes_get_data (tz->zoneinfo, &size);
 
-          /* we only bother to support version 2 */
-          if (size < sizeof (struct tzhead) || memcmp (header, "TZif2", 5))
+          /* check that it is a TZif file */
+          if (size < sizeof (struct tzhead) || memcmp (header, "TZif", 4))
             {
               g_bytes_unref (tz->zoneinfo);
               tz->zoneinfo = NULL;
             }
-          else
+          else if (header->tzh_version == '2')	/* version 2 */
             {
               gint typecnt;
 
@@ -435,6 +440,29 @@
               tz->infos   = (gconstpointer) (tz->indices + tz->timecnt);
               tz->abbrs   = (gconstpointer) (tz->infos + typecnt);
             }
+          else	/* assume version 1 */
+            {
+              gint typecnt, i;
+
+              /* use first header */
+              tz->header = header;
+              typecnt     = guint32_from_be (tz->header->tzh_typecnt);
+              tz->timecnt = guint32_from_be (tz->header->tzh_timecnt);
+
+              /* in version 1, transition times are 4 bytes long, so we need to convert them */
+              const gint32_be *trans32 = (gconstpointer) (tz->header + 1);
+              gint64_be *trans64 = g_malloc (sizeof (*tz->trans) * tz->timecnt);
+              for (i = 0; i < tz->timecnt; i++)
+                {
+                  gint64 tmp = GINT64_TO_BE (gint32_from_be (trans32[i]));
+                  memcpy (&trans64[i], &tmp, sizeof tmp);
+                }
+              tz->trans	  = trans64;
+
+              tz->indices = (gconstpointer) (trans32 + tz->timecnt);
+              tz->infos   = (gconstpointer) (tz->indices + tz->timecnt);
+              tz->abbrs   = (gconstpointer) (tz->infos + typecnt);
+            }
         }
 
       if (identifier)
diff -Nurd -x'*~' glib-2.32.3.orig/glib/gutils.c glib-2.32.3/glib/gutils.c
--- glib-2.32.3.orig/glib/gutils.c	2012-03-11 20:42:42.000000000 -0400
+++ glib-2.32.3/glib/gutils.c	2012-06-05 11:40:28.000000000 -0400
@@ -1991,7 +1991,7 @@
       gchar *data_dirs = (gchar *) g_getenv ("XDG_DATA_DIRS");
 
       if (!data_dirs || !data_dirs[0])
-          data_dirs = "/usr/local/share/:/usr/share/";
+          data_dirs = "@PREFIX@/share:/usr/local/share/:/usr/share/";
 
       data_dir_vector = g_strsplit (data_dirs, G_SEARCHPATH_SEPARATOR_S, 0);
 #endif
@@ -2053,7 +2053,7 @@
       conf_dirs = (gchar *) g_getenv ("XDG_CONFIG_DIRS");
 
       if (!conf_dirs || !conf_dirs[0])
-          conf_dirs = "/etc/xdg";
+          conf_dirs = "@PREFIX@/etc/xdg";
 
       conf_dir_vector = g_strsplit (conf_dirs, G_SEARCHPATH_SEPARATOR_S, 0);
 #endif
diff -Nurd -x'*~' glib-2.32.3.orig/glib/gutils.h glib-2.32.3/glib/gutils.h
--- glib-2.32.3.orig/glib/gutils.h	2012-05-14 17:58:06.000000000 -0400
+++ glib-2.32.3/glib/gutils.h	2012-06-05 11:40:28.000000000 -0400
@@ -77,7 +77,11 @@
 #  define G_INLINE_FUNC
 #  undef  G_CAN_INLINE
 #elif defined (__GNUC__) 
+#if defined(__APPLE_CC__) && (__APPLE_CC__ >= 5400)
+#  define G_INLINE_FUNC static inline
+#else
 #  define G_INLINE_FUNC static __inline __attribute__ ((unused))
+#endif
 #elif defined (G_CAN_INLINE) 
 #  define G_INLINE_FUNC static inline
 #else /* can't inline */
diff -Nurd -x'*~' glib-2.32.3.orig/glib/libcharset/Makefile.am glib-2.32.3/glib/libcharset/Makefile.am
--- glib-2.32.3.orig/glib/libcharset/Makefile.am	2011-08-15 20:51:30.000000000 -0400
+++ glib-2.32.3/glib/libcharset/Makefile.am	2012-06-05 13:25:26.000000000 -0400
@@ -2,7 +2,7 @@
 include $(top_srcdir)/Makefile.decl
 
 INCLUDES = 			\
-	-DLIBDIR=\"$(libdir)\" $(config_h_INCLUDES)
+	-DLIBDIR=\"$(sysconfdir)/glib-2.0\" $(config_h_INCLUDES)
 
 noinst_LTLIBRARIES = libcharset.la
 
@@ -22,10 +22,10 @@
 	make-patch.sh		\
 	libcharset-glib.patch
 
-charset_alias = $(DESTDIR)$(libdir)/charset.alias
-charset_tmp = $(DESTDIR)$(libdir)/charset.tmp
+charset_alias = $(DESTDIR)$(sysconfdir)/glib-2.0/charset.alias
+charset_tmp = $(DESTDIR)$(sysconfdir)/glib-2.0/charset.tmp
 install-exec-local: all-local
-	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)/glib-2.0
 	if test -f $(charset_alias); then \
 	  sed -f ref-add.sed $(charset_alias) > $(charset_tmp) ; \
 	  $(INSTALL_DATA) $(charset_tmp) $(charset_alias) ; \
diff -Nurd -x'*~' glib-2.32.3.orig/glib/libcharset/Makefile.in glib-2.32.3/glib/libcharset/Makefile.in
--- glib-2.32.3.orig/glib/libcharset/Makefile.in	2012-05-14 18:09:30.000000000 -0400
+++ glib-2.32.3/glib/libcharset/Makefile.in	2012-06-05 11:40:28.000000000 -0400
@@ -342,7 +342,7 @@
 	codeset.m4 update.sh make-patch.sh libcharset-glib.patch
 TEST_PROGS = 
 INCLUDES = \
-	-DLIBDIR=\"$(libdir)\" $(config_h_INCLUDES)
+	-DLIBDIR=\"$(sysconfdir)/glib-2.0\" $(config_h_INCLUDES)
 
 noinst_LTLIBRARIES = libcharset.la
 libcharset_la_SOURCES = \
@@ -350,8 +350,8 @@
 	localcharset.h		\
 	localcharset.c
 
-charset_alias = $(DESTDIR)$(libdir)/charset.alias
-charset_tmp = $(DESTDIR)$(libdir)/charset.tmp
+charset_alias = $(DESTDIR)$(sysconfdir)/glib-2.0/charset.alias
+charset_tmp = $(DESTDIR)$(sysconfdir)/glib-2.0/charset.tmp
 SUFFIXES = .sed .sin
 CLEANFILES = charset.alias ref-add.sed ref-del.sed
 all: all-am
@@ -728,7 +728,7 @@
 # run tests in cwd as part of make check
 check-local: test-nonrecursive
 install-exec-local: all-local
-	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)/glib-2.0
 	if test -f $(charset_alias); then \
 	  sed -f ref-add.sed $(charset_alias) > $(charset_tmp) ; \
 	  $(INSTALL_DATA) $(charset_tmp) $(charset_alias) ; \
diff -Nurd -x'*~' glib-2.32.3.orig/glib/libcharset/charset.alias glib-2.32.3/glib/libcharset/charset.alias
--- glib-2.32.3.orig/glib/libcharset/charset.alias	1969-12-31 19:00:00.000000000 -0500
+++ glib-2.32.3/glib/libcharset/charset.alias	2012-06-05 11:41:18.000000000 -0400
@@ -0,0 +1,111 @@
+# This file contains a table of character encoding aliases,
+# suitable for operating system 'darwin'.
+C			ASCII
+bg_BG			UTF-8
+bg_BG.CP1251		CP1251
+cs_CZ			UTF-8
+cs_CZ.ISO8859-2		ISO-8859-2
+da_DK			UTF-8
+da_DK.ISO8859-1		ISO-8859-1
+da_DK.ISO8859-15	ISO-8859-15
+de_AT			UTF-8
+de_AT.ISO8859-1		ISO-8859-1
+de_AT.ISO8859-15	ISO-8859-15
+de_CH			UTF-8
+de_CH.ISO8859-1		ISO-8859-1
+de_CH.ISO8859-15	ISO-8859-15
+de_DE			UTF-8
+de_DE.ISO8859-1		ISO-8859-1
+de_DE.ISO8859-15	ISO-8859-15
+en_AU			UTF-8
+en_AU.ISO8859-1		ISO-8859-1
+en_AU.ISO8859-15	ISO-8859-15
+en_AU.US-ASCII		ASCII
+en_CA			UTF-8
+en_CA.ISO8859-1		ISO-8859-1
+en_CA.ISO8859-15	ISO-8859-15
+en_CA.US-ASCII		ASCII
+en_GB			UTF-8
+en_GB.ISO8859-1		ISO-8859-1
+en_GB.ISO8859-15	ISO-8859-15
+en_GB.US-ASCII		ASCII
+en_US			UTF-8
+en_US.ISO8859-1		ISO-8859-1
+en_US.ISO8859-15	ISO-8859-15
+en_US.US-ASCII		ASCII
+es_ES			UTF-8
+es_ES.ISO8859-1		ISO-8859-1
+es_ES.ISO8859-15	ISO-8859-15
+fi_FI			UTF-8
+fi_FI.ISO8859-1		ISO-8859-1
+fi_FI.ISO8859-15	ISO-8859-15
+fr_BE			UTF-8
+fr_BE.ISO8859-1		ISO-8859-1
+fr_BE.ISO8859-15	ISO-8859-15
+fr_CA			UTF-8
+fr_CA.ISO8859-1		ISO-8859-1
+fr_CA.ISO8859-15	ISO-8859-15
+fr_CH			UTF-8
+fr_CH.ISO8859-1		ISO-8859-1
+fr_CH.ISO8859-15	ISO-8859-15
+fr_FR			UTF-8
+fr_FR.ISO8859-1		ISO-8859-1
+fr_FR.ISO8859-15	ISO-8859-15
+hr_HR			UTF-8
+hr_HR.ISO8859-2		ISO-8859-2
+hu_HU			UTF-8
+hu_HU.ISO8859-2		ISO-8859-2
+is_IS			UTF-8
+is_IS.ISO8859-1		ISO-8859-1
+is_IS.ISO8859-15	ISO-8859-15
+it_CH			UTF-8
+it_CH.ISO8859-1		ISO-8859-1
+it_CH.ISO8859-15	ISO-8859-15
+it_IT			UTF-8
+it_IT.ISO8859-1		ISO-8859-1
+it_IT.ISO8859-15	ISO-8859-15
+ja_JP			UTF-8
+ja_JP.EUC		EUC-JP
+ja_JP.SJIS		SHIFT_JIS
+ko_KR			UTF-8
+ko_KR.EUC		EUC-KR
+la_LN			UTF-8
+la_LN.ISO8859-1		ISO-8859-1
+la_LN.ISO8859-2		ISO-8859-2
+la_LN.ISO8859-4		ISO-8859-4
+la_LN.ISO8859-15	ISO-8859-15
+la_LN.US-ASCII		ASCII
+lt_LT			UTF-8
+lt_LT.ISO8859-4		ISO-8859-4
+nl_BE			UTF-8
+nl_BE.ISO8869-1		ISO-8859-1
+nl_BE.ISO8869-15	ISO-8859-15
+nl_NL			UTF-8
+nl_NL.ISO8869-1		ISO-8859-1
+nl_NL.ISO8869-15	ISO-8859-15
+no_NO			UTF-8
+no_NO.ISO8869-1		ISO-8859-1
+no_NO.ISO8869-15	ISO-8859-15
+pl_PL			UTF-8
+pl_PL.ISO8859-2		ISO-8859-2
+pt_PT			UTF-8
+pt_PT.ISO8859-1		ISO-8859-1
+pt_PT.ISO8859-15	ISO-8859-15
+ru_RU			UTF-8
+ru_RU.CP866		CP866
+ru_RU.ISO8859-5		ISO-8859-5
+ru_RU.KOI8-R		KOI8-R
+ru_RU.cp1251		CP1251
+ru_RU.koi8r		KOI8-R
+sl_SI			UTF-8
+sl_SI.ISO8859-2		ISO-8859-2
+sv_SE			UTF-8
+sv_SE.ISO8859-1		ISO-8859-1
+sv_SE.ISO8859-15	ISO-8859-15
+uk_UA			UTF-8
+uk_UA.KOI8-U		KOI8-U
+uk_UA.cp1251		CP1251
+zh_CN			UTF-8
+zh_CN.EUC		GB2312
+zh_TW			UTF-8
+zh_TW.Big5		BIG5
diff -Nurd -x'*~' glib-2.32.3.orig/glib/tests/gdatetime.c glib-2.32.3/glib/tests/gdatetime.c
--- glib-2.32.3.orig/glib/tests/gdatetime.c	2012-04-04 15:01:46.000000000 -0400
+++ glib-2.32.3/glib/tests/gdatetime.c	2012-06-05 22:41:53.000000000 -0400
@@ -19,6 +19,7 @@
 
 #include "config.h"
 
+#include <stdlib.h>
 #include <string.h>
 #include <time.h>
 #include <glib.h>
@@ -875,8 +876,14 @@
 static void
 test_non_utf8_printf (void)
 {
-  gchar *oldlocale;
+  char *env_flag = NULL;
+  env_flag = getenv("DISABLE_GDateTime_non_utf8_printf_TEST");
+  if (env_flag) {
+    g_print("skipping per request ");
+    return;
+  }
 
+  gchar *oldlocale;
   oldlocale = g_strdup (setlocale (LC_ALL, NULL));
   setlocale (LC_ALL, "ja_JP.eucjp");
   if (strstr (setlocale (LC_ALL, NULL), "ja_JP") == NULL)
diff -Nurd -x'*~' glib-2.32.3.orig/glib/tests/spawn-multithreaded.c glib-2.32.3/glib/tests/spawn-multithreaded.c
--- glib-2.32.3.orig/glib/tests/spawn-multithreaded.c	2012-03-11 20:42:42.000000000 -0400
+++ glib-2.32.3/glib/tests/spawn-multithreaded.c	2012-06-06 01:35:51.000000000 -0400
@@ -23,10 +23,11 @@
 
 #include "config.h"
 
+#include <stdlib.h>
 #include <glib.h>
 #include <string.h>
 
-#define N_THREADS (100)
+#define N_THREADS (20)
 
 static char *echo_prog_path;
 
diff -Nurd -x'*~' glib-2.32.3.orig/glib-gettextize.in glib-2.32.3/glib-gettextize.in
--- glib-2.32.3.orig/glib-gettextize.in	2011-08-15 20:51:30.000000000 -0400
+++ glib-2.32.3/glib-gettextize.in	2012-06-05 11:40:40.000000000 -0400
@@ -49,8 +49,8 @@
     ;;
 esac
 
-datadir=@datadir@
 datarootdir=@datarootdir@
+datadir=@datadir@
 
 gettext_dir=$prefix/share/glib-2.0/gettext
 
diff -Nurd -x'*~' glib-2.32.3.orig/gobject/tests/signals.c glib-2.32.3/gobject/tests/signals.c
--- glib-2.32.3.orig/gobject/tests/signals.c	2012-05-14 17:58:01.000000000 -0400
+++ glib-2.32.3/gobject/tests/signals.c	2012-06-06 04:01:58.000000000 -0400
@@ -1,3 +1,4 @@
+#include <stdlib.h>
 #include <glib-object.h>
 #include "marshalers.h"
 
@@ -391,6 +392,13 @@
 static void
 test_generic_marshaller_signal_1 (void)
 {
+  char *env_flag = NULL;
+  env_flag = getenv("DISABLE_gobject_signals_generic_marshaller_1_TEST");
+  if (env_flag) {
+    g_print("skipping per request ");
+    return;
+  }
+
   Test *test;
   test = g_object_new (test_get_type (), NULL);
 
@@ -678,6 +686,13 @@
 static void
 test_all_types (void)
 {
+  char *env_flag = NULL;
+  env_flag = getenv("DISABLE_gobject_signals_all_types_TEST");
+  if (env_flag) {
+    g_print("skipping per request ");
+    return;
+  }
+
   Test *test;
 
   int i = 42;
