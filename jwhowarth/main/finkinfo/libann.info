Package: libann
Version: 1.1.2
Revision: 3
Maintainer: Sjors Gielen <fink-libann@sjorsgielen.nl>
License: LGPL

Description: Approximate nearest neighbour library for C++

BuildDepends: automake1.14, fink (>= 0.32)

Source: http://www.cs.umd.edu/~mount/ANN/Files/%v/ann_%v.tar.gz
Source-MD5: 7ffaacc7ea79ca39d4958a6378071365
Source2: http://ftp.de.debian.org/debian/pool/main/a/ann/ann_%v+doc-5.debian.tar.xz
Source2-MD5: 95c01680996b49655420ab7e76e131ce

DocFiles: Copyright.txt License.txt ReadMe.txt doc/ANNmanual.pdf

PatchScript: <<
	#!/bin/sh -ev
	files="autotools-files consider-pts-null annkFRSearch-default-argument clang-ftbfs"
	for f in $files ; do
		patch -p1 < %b/../debian/patches/$f.diff
	done
	perl -pi -e 's|AC_CXX_HAVE_STD||g' configure.ac
	perl -pi -e 's|AC_CXX_HAVE_STL||g' configure.ac
	perl -pi -e 's|AC_CXX_TYPENAME||g' configure.ac
<<
CompileScript: <<
	#!/bin/sh -ev
	touch aclocal.m4
	touch NEWS README AUTHORS ChangeLog
	mkdir -p cfg
	libtoolize --automake
	autoheader
	aclocal -I m4 --install 
	automake --force-missing --add-missing
	autoconf 
	./configure %c
	make
<<

InstallScript: <<
	#!/bin/sh -ev
	mkdir -p %i/bin %i/lib/pkgconfig %i/include
	make install DESTDIR=%d

# create pkg-config file
cat << EOF > %i/lib/pkgconfig/ann.pc
prefix = %p
exec_prefix = \${prefix}
libdir = \${exec_prefix}/lib
includedir = \${prefix}/include

Name: ann
Description: Library for searching Approximate Nearest Neighbors
Version: %v
Requires:
Libs: -L\${libdir} -lANN
Cflags: -I\${includedir}
EOF

<<

SplitOff: <<
Package: %n-dev
Depends: %n (= %v-%r)
BuildDependsOnly: false
Files: <<
include
lib/libann.{a,dylib,la}
<<
<<

Shlibs: %p/lib/libann.0.dylib 1.0.0 %n (>= 1.2.2-3)

